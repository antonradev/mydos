!function(){"use strict";var a=MyDOs,b=a.dom.element.id("saveItemForm");a.dom.element.addClass("item-save-form",b);var c=a.dom.input({id:"itemNameField",placeholder:"Note Name:","class":"form-control item-name-field",maxlength:"30"}),d=a.dom.textarea({id:"itemContentField",placeholder:"Description:","class":"form-control item-description-field",maxlength:"50"}),e=a.dom.button({id:"itemSaveButton","class":"btn btn-primary disabled",disabled:!0},"Save item");a.dom.append([c,d,e],b),a.dom.event(e,"click",function(){a.saveItem(c.value,d.value),c.value="",d.value=""}),a.dom.event(c,"blur keyup",function(){a.dom.activateButton(c,d,e)}),a.dom.event(d,"blur keyup",function(){a.dom.activateButton(c,d,e)})}();var MyDOs=function(a){"use strict";return a.addLastItem=function(a){var b=this.dom.element.id("itemsListWrapper"),c=this.dom.div();return c.innerHTML=this.rowTemplate(a),b.insertBefore(c,b.firstChild)},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.saveItem=function(a,b){var c=this.data.getLastItemId(this.settings.dataTableName)+1,d={id:c,title:a,content:b};this.data.save(this.settings.dataTableName,d,function(){this.addLastItem(d)}.bind(this))},a}(MyDOs||{}),MyDOs=function(a){"use strict";var b=MyDOs.settings.dataTableName;return a.data={},a.data.exampleRows=function(){localStorage.setItem("items",JSON.stringify([{id:3,title:"Just a title",content:"This is the content for this item"},{id:2,title:"Another item",content:"The item just went to the river by its horse"},{id:1,title:"The 3th item here",content:"The very first item with the id 1. This is an item in the local-Storage array."}])),MyDOs.renderTable()},a.data.parse=function(a){return JSON.parse(a)},a.data.write=function(a){return JSON.stringify(a)},a.data.getLastItemId=function(a){var b=null;return b=this.parse(localStorage.getItem(a))&&0!==this.parse(localStorage.getItem(a)).length?this.parse(localStorage.getItem(a))[0].id:0},a.data.getAllItems=function(a){var b=localStorage.getItem(a),c=this.parse(b);return c},a.data.save=function(a,c,d){var e=this.getAllItems(b);"object"==typeof e&&null===e&&(e=[]),e.unshift(c),localStorage.setItem(a,this.write(e)),d&&d()},a.data.deleteItem=function(){MyDOs.dom.event(window,"deletedRow",function(a){var c=a.detail.id,d=this.getAllItems(b);for(var e in d)parseInt(d[e].id)===parseInt(c)&&(d[e]=null);d=d.filter(function(a){return null!==a}),localStorage.setItem(b,this.write(d))}.bind(this))},a.data.editItem=function(){MyDOs.dom.event(window,"editedRow",function(a){var c=a.detail,d=this.getAllItems(b);for(var e in d)parseInt(d[e].id)===parseInt(c.id)&&(d[e].title=c.name.toString(),d[e].content=c.content);localStorage.setItem(b,this.write(d))}.bind(this))},a.data.reorderItems=function(){var a=this.getAllItems(b);a.reverse(),localStorage.setItem(b,this.write(a))},a}(MyDOs||{}),MyDOs=function(a){"use strict";var b=MyDOs;return a.deleteRow=function(a){function c(a,c){b.dom.event(a[c],"click",function(){d.innerHTML=""})}var d=b.dom.element.id("modalPlaceholder");d.innerHTML=this.deleteModalTemplate();var e=document.getElementsByClassName("js-close-modal"),f=b.dom.element.id("deleteItemButton");b.dom.event(f,"click",function(){var c={id:a.path[2].childNodes[0].innerText},e=document.createEvent("CustomEvent");e.initCustomEvent("deletedRow",!0,!0,c),b.data.deleteItem(),window.dispatchEvent(e),a.path[3].removeChild(a.path[2]),d.innerHTML=""});for(var g in e)e.hasOwnProperty(g)&&c(e,g)},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.dom={},a.dom.element={},a.dom.element.id=function(a){return document.getElementById(a)},a.dom.element.addClass=function(a,b){return b.className=a},a.dom.div=function(a,b){var c=document.createElement("DIV");for(var d in a)c.setAttribute(d,a[d]);return b&&b(),c},a.dom.input=function(a){var b=document.createElement("INPUT");a.type||b.setAttribute("type","text");for(var c in a)b.setAttribute(c,a[c]);return b},a.dom.textarea=function(a){var b=document.createElement("TEXTAREA");for(var c in a)b.setAttribute(c,a[c]);return b},a.dom.button=function(a,b){var c=document.createElement("BUTTON");for(var d in a)c.setAttribute(d,a[d]);return b&&(c.innerHTML=b),c},a.dom.append=function(a,b){if(!a||!b)throw new Error("dom.append() requires wrapper element and element to be appended");if(a.length)for(var c=0;c<=a.length-1;c++){if(1!==a[c].nodeType)throw new Error('Some of "'+a+'" are not nodes (nodeType). \n You need to use DOM elements');b.appendChild(a[c])}else{if(1!==a.nodeType)throw new Error(a+" is not a node (nodeType). \n You need to use DOM element");b.appendChild(a)}return b},a.dom.event=function(a,b,c){if(!a)throw new Error('module.dom.event() - First argument is "'+a+'". An element passed is needed for the event function. Check your passed variable/scope');for(var d=b.split(" "),e=0,f=d.length;f>e;e++)a.addEventListener(d[e],c,!1)},a.dom.activateButton=function(a,b,c){a.value.length>0&&b.value.length>0?(this.element.addClass("btn btn-primary",c),c.removeAttribute("disabled")):(this.element.addClass("btn btn-primary disabled",c),c.setAttribute("disabled",!0))},a}(MyDOs||{}),MyDOs=function(a){"use strict";var b=MyDOs;return a.editRow=function(a){function c(a,c){b.dom.event(a[c],"click",function(){e.innerHTML=""})}var d={id:a.path[2].childNodes[0].innerText,name:a.path[2].childNodes[1].innerText,content:a.path[2].childNodes[2].innerText},e=b.dom.element.id("modalPlaceholder");e.innerHTML=this.editModalTemplate(d.name,d.content);var f=document.getElementsByClassName("js-close-modal"),g=b.dom.element.id("saveEditedItem"),h=b.dom.element.id("editedItemName"),i=b.dom.element.id("editedItemContent");b.dom.event(h,"keyup",function(){d.name=h.value,b.dom.activateButton(h,i,g)}),b.dom.event(i,"keyup",function(){d.content=i.value,b.dom.activateButton(h,i,g)});var j=document.createEvent("CustomEvent");j.initCustomEvent("editedRow",!0,!0,d),b.dom.event(g,"click",function(){b.data.editItem(),e.innerHTML="",a.path[2].childNodes[1].innerText=d.name,a.path[2].childNodes[2].innerText=d.content,window.dispatchEvent(j)});for(var k in f)f.hasOwnProperty(k)&&c(f,k)},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.deleteModalTemplate=function(){var a="";return a+='<div class="edit-item-modal delete-modal" id="deleteItemModal">',a+='<span class="close-edit-modal js-close-modal">&times;</span>',a+="<h4>Delete Item</h4><br>",a+='<div><button class="btn btn-danger" id="deleteItemButton">Delete Item</button> <button class="btn js-close-modal">Cancel</button>',a+="</div></div>"},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.editModalTemplate=function(a,b){a&&b||(a="",b="");var c="";return c+='<div class="edit-item-modal" id="editItemModal">',c+='<span class="close-edit-modal js-close-modal" id="closeEditModal">&times;</span>',c+="<h4>Edit Item</h4>",c+='<div><input type="text" class="form-control" value="'+a+'" id="editedItemName" maxlength="30"></div>',c+='<div><textarea class="form-control"  id="editedItemContent" maxlength="50">'+b+"</textarea></div>",c+='<div><button class="btn btn-primary" id="saveEditedItem">Save Item</button> <button class="btn js-close-modal" id="cancelEditedItem">Cancel</button>',c+="</div></div>"},a}(MyDOs||{});!function(){"use strict";MyDOs.renderTable()}();var MyDOs=function(a){"use strict";return a.renderTable=function(){var a=this.dom.element.id(this.settings.container);a.innerHTML="";var b=this.dom.div({"class":"item-rows",id:"itemsListWrapper"}),c=this.data.getAllItems(this.settings.dataTableName);for(var d in c)if(c.hasOwnProperty(d)){var e=this.dom.div();for(e.innerHTML=this.rowTemplate(c,d);e.firstChild;)this.dom.append(e.firstChild,b)}this.dom.append(b,a)},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.reorderItems=function(){var a=this.dom.element.id(this.settings.container);a.innerHTML="",this.data.reorderItems(),this.renderTable()},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.rowTemplate=function(a,b){var c="";return c+='<div class="item-row">',c+='<div class="item-id">'+(a.id||a[b].id)+"</div>",c+='<div class="item-title">'+(a.title||a[b].title||"No title")+"</div>",c+='<div class="item-content">'+(a.content||a[b].content||"No content yet")+"</div>",c+='<div class="delete-item"><span class="delete-icon" onclick="MyDOs.deleteRow(event)">&times;</span></div>',c+='<div class="edit-item"><span class="edit-icon" onclick="MyDOs.editRow(event)">&#9998;</span></div>',c+="</div>"},a}(MyDOs||{}),MyDOs=function(a){"use strict";return a.settings={container:"myDOsContent",dataTableName:"items"},a}(MyDOs||{});